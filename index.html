<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scolari Official | King Rank</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .navbar {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(56, 189, 248, 0.2);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn-nav {
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(56, 189, 248, 0.3);
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-nav:hover {
            background: rgba(56, 189, 248, 0.1);
            border-color: #3b82f6;
            transform: translateY(-2px);
        }

        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(56, 189, 248, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            padding: 2.5rem;
            width: 100%;
            max-width: 500px;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }

        .title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }

        .subtitle {
            text-align: center;
            color: #94a3b8;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .version-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .version-btn {
            flex: 1;
            padding: 1.2rem;
            border-radius: 12px;
            background: rgba(30, 41, 59, 0.7);
            border: 2px solid rgba(56, 189, 248, 0.2);
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .version-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.2);
        }

        .version-btn.active {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        .version-btn i {
            font-size: 1.8rem;
            color: #60a5fa;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: #cbd5e1;
            font-weight: 600;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border-radius: 10px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(148, 163, 184, 0.3);
            color: #f1f5f9;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .submit-btn {
            width: 100%;
            padding: 1.2rem;
            border-radius: 12px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            border: none;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .status-box {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 10px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(56, 189, 248, 0.3);
            text-align: center;
            font-weight: 600;
            min-height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .status-success {
            color: #4ade80;
            border-color: rgba(74, 222, 128, 0.3);
            background: rgba(74, 222, 128, 0.1);
        }

        .status-error {
            color: #f87171;
            border-color: rgba(248, 113, 113, 0.3);
            background: rgba(248, 113, 113, 0.1);
        }

        .status-loading {
            color: #60a5fa;
        }

        .cooldown-box {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
            background: rgba(248, 113, 113, 0.1);
            border: 1px solid rgba(248, 113, 113, 0.3);
            color: #fca5a5;
            text-align: center;
            font-size: 0.9rem;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: #64748b;
            font-size: 0.9rem;
            border-top: 1px solid rgba(56, 189, 248, 0.1);
        }

        @media (max-width: 640px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .version-selector {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const App = () => {
            const [currentView, setCurrentView] = React.useState('home');
            const [selectedVersion, setSelectedVersion] = React.useState('cpm1');
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');
            const [status, setStatus] = React.useState({ text: '', type: '' });
            const [isLoading, setIsLoading] = React.useState(false);
            const [isCooldown, setIsCooldown] = React.useState(false);
            const [cooldownTime, setCooldownTime] = React.useState(0);

            const API_BASE_URL = 'https://your-vercel-app.vercel.app/api'; // Ganti dengan URL Vercel lu

            const startCooldown = () => {
                setIsCooldown(true);
                setCooldownTime(30);
                const interval = setInterval(() => {
                    setCooldownTime(prev => {
                        if (prev <= 1) {
                            clearInterval(interval);
                            setIsCooldown(false);
                            return 0;
                        }
                        return prev - 1;
                    });
                }, 1000);
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (isCooldown || isLoading) return;

                if (!email || !password) {
                    setStatus({ text: 'Email dan password harus diisi!', type: 'error' });
                    return;
                }

                setIsLoading(true);
                setStatus({ text: 'Memproses login...', type: 'loading' });

                try {
                    const response = await fetch(`/login`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            version: selectedVersion,
                            email: email,
                            password: password
                        })
                    });

                    const data = await response.json();

                    if (response.ok) {
                        if (data.success) {
                            setStatus({ text: 'âœ… Login berhasil! Mengatur King Rank...', type: 'success' });
                            
                            // Set rank
                            const rankResponse = await fetch(`/set-rank`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    version: selectedVersion,
                                    token: data.token
                                })
                            });

                            const rankData = await rankResponse.json();

                            if (rankResponse.ok && rankData.success) {
                                setStatus({ text: 'ðŸŽ‰ King Rank berhasil diatur!', type: 'success' });
                            } else {
                                setStatus({ text: `Login berhasil tapi gagal set rank: ${rankData.message}`, type: 'error' });
                            }
                        } else {
                            setStatus({ text: `Login gagal: ${data.message}`, type: 'error' });
                        }
                    } else {
                        setStatus({ text: `Error: ${data.message || 'Gagal terhubung ke server'}`, type: 'error' });
                    }
                } catch (error) {
                    setStatus({ text: `Network error: ${error.message}`, type: 'error' });
                } finally {
                    setIsLoading(false);
                    startCooldown();
                }
            };

            const renderHome = () => (
                <div className="container">
                    <nav className="navbar">
                        <div className="logo">SCOLARI OFFICIAL</div>
                        <div className="nav-buttons">
                            <button className="btn-nav" onClick={() => setCurrentView('home')}>
                                <i className="fas fa-home"></i> Home
                            </button>
                            <button className="btn-nav" onClick={() => setCurrentView('login')}>
                                <i className="fas fa-crown"></i> Get Rank
                            </button>
                        </div>
                    </nav>

                    <main className="main-content">
                        <div className="card">
                            <h1 className="title">KING RANK BOOSTER</h1>
                            <p className="subtitle">
                                Dapatkan King Rank di CPM1 atau CPM2 dengan mudah dan cepat.
                                Pilih versi game Anda di bawah ini.
                            </p>

                            <div className="version-selector">
                                <button 
                                    className={`version-btn ${selectedVersion === 'cpm1' ? 'active' : ''}`}
                                    onClick={() => setSelectedVersion('cpm1')}
                                >
                                    <i className="fas fa-gamepad"></i>
                                    <span>CPM 1</span>
                                </button>
                                <button 
                                    className={`version-btn ${selectedVersion === 'cpm2' ? 'active' : ''}`}
                                    onClick={() => setSelectedVersion('cpm2')}
                                >
                                    <i className="fas fa-gamepad"></i>
                                    <span>CPM 2</span>
                                </button>
                            </div>

                            <button 
                                className="submit-btn"
                                onClick={() => setCurrentView('login')}
                            >
                                <i className="fas fa-arrow-right"></i>
                                LANJUT KE LOGIN
                            </button>

                            <div className="status-box" style={{ marginTop: '2rem' }}>
                                <div>
                                    <p><i className="fas fa-shield-alt"></i> Sistem aman & terenkripsi</p>
                                    <p style={{ fontSize: '0.9rem', color: '#94a3b8', marginTop: '0.5rem' }}>
                                        Data login tidak disimpan di server kami
                                    </p>
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer className="footer">
                        <p>Â© 2024 Scolari Official | For educational purposes only</p>
                    </footer>
                </div>
            );

            const renderLogin = () => (
                <div className="container">
                    <nav className="navbar">
                        <div className="logo">SCOLARI OFFICIAL</div>
                        <div className="nav-buttons">
                            <button className="btn-nav" onClick={() => setCurrentView('home')}>
                                <i className="fas fa-arrow-left"></i> Back
                            </button>
                        </div>
                    </nav>

                    <main className="main-content">
                        <div className="card">
                            <h1 className="title">
                                <i className="fas fa-crown"></i> {selectedVersion.toUpperCase()} LOGIN
                            </h1>
                            <p className="subtitle">
                                Masukkan akun {selectedVersion.toUpperCase()} Anda untuk mendapatkan King Rank
                            </p>

                            <form onSubmit={handleSubmit}>
                                <div className="form-group">
                                    <label className="form-label">Email</label>
                                    <input
                                        type="email"
                                        className="form-input"
                                        placeholder="player@example.com"
                                        value={email}
                                        onChange={(e) => setEmail(e.target.value)}
                                        required
                                    />
                                </div>

                                <div className="form-group">
                                    <label className="form-label">Password</label>
                                    <input
                                        type="password"
                                        className="form-input"
                                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        required
                                    />
                                </div>

                                <button 
                                    type="submit" 
                                    className="submit-btn"
                                    disabled={isLoading || isCooldown}
                                >
                                    {isLoading ? (
                                        <>
                                            <div className="loading-spinner"></div>
                                            PROCESSING...
                                        </>
                                    ) : isCooldown ? (
                                        <>
                                            <i className="fas fa-clock"></i>
                                            COOLDOWN ({cooldownTime}s)
                                        </>
                                    ) : (
                                        <>
                                            <i className="fas fa-crown"></i>
                                            GET KING RANK
                                        </>
                                    )}
                                </button>
                            </form>

                            {isCooldown && (
                                <div className="cooldown-box">
                                    <i className="fas fa-exclamation-circle"></i> 
                                    Tunggu {cooldownTime} detik sebelum mencoba lagi
                                </div>
                            )}

                            {status.text && (
                                <div className={`status-box ${status.type === 'success' ? 'status-success' : status.type === 'error' ? 'status-error' : 'status-loading'}`}>
                                    {status.text}
                                </div>
                            )}

                            <div style={{ marginTop: '1.5rem', fontSize: '0.85rem', color: '#94a3b8', textAlign: 'center' }}>
                                <p><i className="fas fa-info-circle"></i> Pastikan email dan password benar</p>
                                <p>Proses membutuhkan waktu 10-30 detik</p>
                            </div>
                        </div>
                    </main>

                    <footer className="footer">
                        <p>Â© 2024 Scolari Official | Sistem bekerja 100%</p>
                    </footer>
                </div>
            );

            return currentView === 'home' ? renderHome() : renderLogin();
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
